
<%- include('../includes/head.ejs') -%>
<%- include('../includes/navigation.ejs') -%>

<%- include('../includes/header.ejs') -%>
<%- include('../components/searchbartr.ejs') -%>
<a href="/customers/newcustomer" class="btn btn-danger ml-3" type="button" aria-label="Add New">Add New</a>
</div>
</div>


</div>
</div>
</div>
<div class="container-fluid mt--6">
    <div class="row">
        <div class="col">
          <div class="card">
            <!-- Card header -->
            <div class="card-header">
              <h3 class="mb-0">Personal Information</h3>
            </div>
            <!-- Card body -->
            <div class="card-body" id="cardb">
              <form class="needs-validation" action="/addCustomer" method="POST" novalidate>
                <div class="form-row">
                  <div class="col-md-4 mb-3">
                    <label class="form-control-label" for="name">Full Name</label>
                    <input type="text" class="form-control" id="name" name="name" placeholder="Enter full name" required>
                    <div class="valid-feedback">
                      Looks good!
                    </div>
                  </div>
                  <div class="col-md-4 mb-3">
                    <label class="form-control-label" for="mobileNumber">Mobile Number</label>
                    <input type="text" class="form-control" id="mobileNumber" name="mobileNumber" placeholder="Enter mobile number" required>
                    <div class="valid-feedback">
                      Looks good!
                    </div>
                  </div>
                  <div class="col-md-4 mb-3">
                    <label class="form-control-label" for="mobileNumber2">Alternate Mobile Number</label>
                    <input type="text" class="form-control" id="mobileNumber2" name="mobileNumber2" placeholder="Enter alternate number">
                    <div class="invalid-feedback">
                      Please provide an alternate number.
                    </div>
                  </div>
                </div>
      
                <h4 class="mt-3 mb-3">Address Details</h4>
      
                <div class="row mt-3">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label class="form-control-label" for="zone">Zone</label>
                      <select class="zone-js form-control" name="zoneId" id="zoneId" required></select>
                      <!-- <input class="form-control" id="zone" name="zone" placeholder="Zone" type="text" required> -->
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label class="form-control-label" for="address">Address</label>
                      <input class="form-control" id="address" name="address" placeholder="Address" type="text" required>
                    </div>
                  </div>
                </div>
      
                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label class="form-control-label" for="apartmentNumber">Apartment/House No:</label>
                      <input class="form-control" id="apartmentNumber" name="apartmentNumber" placeholder="Apartment/House No" type="text">
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label class="form-control-label" for="route">Route</label>
                      <select class="items-js form-control" name="routeId" id="routeId" required></select>

                      <!-- <input class="form-control" id="route" name="route" placeholder="Route" type="text" required> -->
                    </div>
                  </div>
                </div>
      
                <div class="form-row">
                  <div class="col-md-4 mb-3">
                    <label class="form-control-label" for="city">City</label>
                    <!-- <input type="text" class="form-control" id="city" name="city" placeholder="City" required> -->

                    <select class="city-js form-control" name="city" id="city" required></select>

                  </div>
                  <div class="col-md-4 mb-3">
                    <label class="form-control-label" for="walletBalance">Wallet Balance</label>
                    <input type="number" class="form-control" id="walletBalance" name="walletBalance" placeholder="Wallet Balance" required>
                  </div>
                </div>
      
                <!-- Submit Button -->
                <div>
                  <button type="submit" class="btn btn-success">Add New Customer</button>
                  <a href="/" class="btn btn-danger">Cancel</a>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

      <!-- Include Select2 CSS -->
      
      <!-- Include Select2 JS -->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.8/js/select2.min.js" defer></script>
      <script>
        $(document).ready(function () {
          // Initialize Select2 for the element with the correct ID or class
          $('.zone-js').select2({
            dropdownParent: $("#cardb"),
  ajax: {
    url: '/zoneids', // Backend endpoint
    dataType: 'json',
    delay: 250, // Debounce for performance
    processResults: function (data) {
      return {
        results: data.map(function (item) {
          return { id: item.id, text: item.id }; // Customize text display
        }),
      };
    },
  
  },
});
        });
      </script>   
          <script>
            $(document).ready(function () {
              // Initialize Select2 for the element with the correct ID or class
              $('.items-js').select2({
                dropdownParent: $("#cardb"),
      ajax: {
        url: '/routeids', // Backend endpoint
        dataType: 'json',
        delay: 250, // Debounce for performance
        processResults: function (data) {
          return {
            results: data.map(function (item) {
              return { id: item.id, text: item.id }; // Customize text display
            }),
          };
        },
      
      },
    });
            });
          </script>   
      
      <script>
        $(document).ready(function () {
          // Initialize Select2 for the element with the correct ID or class
          $('.city-js').select2({
            dropdownParent: $("#cardb"),
  ajax: {
    url: '/citynames', // Backend endpoint
    dataType: 'json',
    delay: 250, // Debounce for performance
    processResults: function (data) {
      return {
        results: data.map(function (item) {
          return { id: item.city, text: item.city }; // Customize text display
        }),
      };
    },
  
  },
});
        });
      </script> 
<%- include('../includes/footer.ejs') -%>

<%- include('../includes/end.ejs') -%>